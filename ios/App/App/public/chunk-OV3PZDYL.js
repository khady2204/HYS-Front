import{a as L}from"./chunk-YIKDUMCI.js";import{a as A}from"./chunk-O7TI7L7T.js";import{g as U}from"./chunk-SKEETBT7.js";import{a as j}from"./chunk-NUWLO4TS.js";import{c as P,h as y,i as F}from"./chunk-RETT3Y54.js";import{Ab as f,Ac as E,Da as x,Ha as k,M as b,Q as h,Ub as _,Va as u,Wa as r,Xa as s,Xb as M,Ya as m,cc as O,gb as S,ib as I,qa as v,qb as l,sa as c,sb as g,tb as w,xa as d,xb as C}from"./chunk-WVCMXTPH.js";import"./chunk-AAGPOIMH.js";import"./chunk-HFL6MWQG.js";import"./chunk-UJWRXINH.js";import"./chunk-4XRDT473.js";import"./chunk-OAZACCPN.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-HHPFJLTL.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-JHI3MBHO.js";var T=(()=>{let e=class e{constructor(t){this.http=t,this.baseUrl="http://localhost:8081/api/suggestions"}getSuggestions(){return this.http.get(`${this.baseUrl}`)}};e.\u0275fac=function(n){return new(n||e)(h(P))},e.\u0275prov=b({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var B=i=>["/profile",i],R=i=>["/chat",i];function $(i,e){if(i&1&&(r(0,"div",10)(1,"div",11),m(2,"img",12),r(3,"div")(4,"h6",13),l(5),s(),r(6,"div",14),l(7),m(8,"br"),l(9),s(),r(10,"button",15),l(11," Commencer une discussion "),s()()()()),i&2){let a=e.$implicit,t=I();c(2),u("alt",C("Photo de ",a.prenom," ",a.nom))("src",a.photoUrl,v),c(3),w("",a.prenom," ",a.nom),c(2),g(" Compatibilit\xE9 : ",a.compatibilite," %"),c(2),g(" ",a.interetsCommuns," "),c(),u("routerLink",f(10,R,a.userId))("state",t.getUserState(a))}}var Y=(()=>{let e=class e{constructor(t,n,o,p){this.location=t,this.suggestionService=n,this.userAuthService=o,this.router=p,this.suggestions=[],this.userId=null}ngOnInit(){if(!this.userAuthService.isAuthenticated()){this.router.navigate(["/login"]);return}let t=this.userAuthService.getUser();if(this.userId=t?.id??t?.userId??null,!this.userId){console.warn("Identifiant utilisateur introuvable.");return}this.loadSuggestions()}loadSuggestions(){if(!localStorage.getItem("jwtToken")){console.warn("Token JWT introuvable.");return}this.suggestionService.getSuggestions().subscribe({next:n=>{this.suggestions=n.filter(o=>o.compatibilite&&o.compatibilite>0).sort((o,p)=>p.compatibilite-o.compatibilite),console.log("Suggestions charg\xE9es:",this.suggestions)},error:n=>{console.error("Erreur lors du chargement des suggestions:",n)}})}getUserState(t){return{user:{id:t.userId,prenom:t.prenom,nom:t.nom,photoUrl:t.photoUrl,phone:t.phone}}}goBack(){this.location.back()}};e.\u0275fac=function(n){return new(n||e)(d(_),d(T),d(j),d(y))},e.\u0275cmp=x({type:e,selectors:[["app-suggestion"]],decls:14,vars:4,consts:[[1,"bg-pink"],[1,"header","px-3","pt-5","pb-5","d-flex","align-items-center","justify-content-between",2,"background-color","#FF008A","margin-bottom","25px"],[1,"bi","bi-arrow-left","fs-4","text-dark","fw-bold",3,"click"],[3,"routerLink"],["src","assets/img/myLOve/suggestion/tabProfile.png","alt","Profile","width","40","height","40",1,"rounded-circle","border","border-white"],[1,"d-flex","w-100","position-relative",2,"margin-top","-30px"],["href","/discussions",1,"tab-button","active","text-decoration-none"],[1,"tab-button","inactive"],[1,"px-3","mt-5"],["class","card mb-5 p-3 border-0 rounded-4 shadow-sm",4,"ngFor","ngForOf"],[1,"card","mb-5","p-3","border-0","rounded-4","shadow-sm"],[1,"d-flex","align-items-center"],["width","60","height","60",1,"rounded-circle","me-3",3,"src","alt"],[1,"fw-bold","mb-1"],[1,"text-muted","small",2,"font-family","'Inter'"],[1,"btn","btn-pink","mb-2","text-white","w-100","mt-3",3,"routerLink","state"]],template:function(n,o){n&1&&(r(0,"ion-content",0)(1,"div",1)(2,"i",2),S("click",function(){return o.goBack()}),s(),m(3,"app-dropdown-drawer"),r(4,"a",3),m(5,"img",4),s()(),r(6,"div",5)(7,"a",6),l(8,"Discussions"),s(),r(9,"div",7),l(10,"Suggestions"),s()(),r(11,"div",8),k(12,$,12,12,"div",9),s(),m(13,"app-floating-menu"),s()),n&2&&(c(4),u("routerLink",f(2,B,o.userId)),c(8),u("ngForOf",o.suggestions))},dependencies:[U,O,M,E,A,L,F],styles:[".bg-pink[_ngcontent-%COMP%]{background-color:#ff008a}.btn-pink[_ngcontent-%COMP%]{background-color:#ff008a;border:none}.btn-pink[_ngcontent-%COMP%]:hover{background-color:#ff008a}.tab-button[_ngcontent-%COMP%]{margin-top:-27px;flex:1;padding:.6rem 1rem;font-weight:600;font-size:.9rem;text-align:center;cursor:pointer;border:none;transition:.2s ease-in-out;border-radius:0}.tab-button[_ngcontent-%COMP%]:first-child{border-top-left-radius:80px;border-bottom-right-radius:30px}.tab-button[_ngcontent-%COMP%]:last-child{border-top-right-radius:80px}.tab-button.active[_ngcontent-%COMP%]{background-color:#000;color:#fff}.tab-button.inactive[_ngcontent-%COMP%]{background-color:#fff;color:#000}.card[_ngcontent-%COMP%]{background-color:#faf6f8}.person-name[_ngcontent-%COMP%]{font-family:Arial}.infos-person[_ngcontent-%COMP%]{font-family:Inter;font-size:medium}"]});let i=e;return i})();export{Y as SuggestionPage};
