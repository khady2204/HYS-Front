import{a as D}from"./chunk-IWOS63WX.js";import{a as k,b as F,c as I,g as j,h as E,l as N}from"./chunk-YVFP7G2U.js";import"./chunk-POA22WFE.js";import"./chunk-QUJFQN2Y.js";import"./chunk-6D27DZ34.js";import"./chunk-3NODV7JW.js";import"./chunk-547OZNO4.js";import"./chunk-JX6BS7SJ.js";import"./chunk-3TIPS6QV.js";import"./chunk-BSAYALUA.js";import"./chunk-7FY2OE2O.js";import"./chunk-J2OL6VUA.js";import"./chunk-GSIDHORN.js";import"./chunk-ET25664Q.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-JWWC77AT.js";import"./chunk-CKP3SGE2.js";import"./chunk-5IOERQT4.js";import{f as h,h as x}from"./chunk-RETT3Y54.js";import{Ac as S,Bc as _,Da as g,Va as c,Wa as n,Xa as i,Ya as s,cc as b,gb as f,jc as v,lc as d,nc as C,oc as y,qb as p,rc as M,sa as m,sc as w,tc as O,xa as a,zc as P}from"./chunk-WVCMXTPH.js";import"./chunk-HFL6MWQG.js";import"./chunk-UJWRXINH.js";import"./chunk-4XRDT473.js";import"./chunk-OAZACCPN.js";import"./chunk-CLDSZD2A.js";import"./chunk-M2X7KQLB.js";import"./chunk-HHPFJLTL.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-JHI3MBHO.js";var L=(()=>{let r=class r{constructor(o,t,e,u){this.fb=o,this.authService=t,this.router=e,this.route=u}ngOnInit(){this.otpForm=this.fb.group({otp:["",[d.required,d.minLength(4),d.maxLength(6)]]}),this.route.queryParams.subscribe(o=>{this.phone=o.phone,this.phone||(alert("Num\xE9ro de t\xE9l\xE9phone manquant"),this.router.navigate(["/forgot-password"]))})}onSubmit(){if(this.otpForm.invalid)return;let o=this.otpForm.value.otp,t={phone:this.phone,otp:o};console.log("Donn\xE9es envoy\xE9es au backend :",t),this.authService.verifyOtpForReset(t).subscribe({next:e=>{console.log(" R\xE9ponse backend :",e),this.router.navigate(["/new-password"],{queryParams:{phone:this.phone}})},error:e=>{console.error("Erreur serveur :",e),alert("OTP invalide ou erreur serveur")}})}};r.\u0275fac=function(t){return new(t||r)(a(P),a(D),a(x),a(h))},r.\u0275cmp=g({type:r,selectors:[["app-otp-verification"]],decls:17,vars:2,consts:[["slot","start"],["defaultHref","/f-password","text",""],[1,"sms-container",3,"fullscreen"],[1,"sms-wrapper"],[1,"logo-container"],["src","assets/logo.png",1,"logo-img"],[1,"title-container"],[3,"ngSubmit","formGroup"],[1,"input-container"],[1,"input-label"],["type","tel","placeholder","xxxxxxx","formControlName","otp"],["expand","block","type","submit",1,"send-btn"]],template:function(t,e){t&1&&(n(0,"ion-toolbar")(1,"ion-buttons",0),s(2,"ion-back-button",1),i()(),n(3,"ion-content",2)(4,"div",3)(5,"div",4),s(6,"img",5),i(),n(7,"div",6)(8,"h1"),p(9,"Validation SMS"),i()(),n(10,"form",7),f("ngSubmit",function(){return e.onSubmit()}),n(11,"div",8)(12,"label",9),p(13,"Code"),i(),s(14,"input",10),i(),n(15,"ion-button",11),p(16,"Valider"),i()()()()),t&2&&(m(3),c("fullscreen",!0),m(7),c("formGroup",e.otpForm))},dependencies:[N,k,F,I,j,E,b,S,M,v,C,y,_,w,O],styles:["ion-toolbar[_ngcontent-%COMP%]{--border-width: 0;box-shadow:none;height:56px;--min-height: 56px;max-width:350px;margin:0 auto;width:100%;padding:0 16px;border-top-left-radius:20px;border-top-right-radius:20px}ion-back-button[_ngcontent-%COMP%]{margin-left:-20px}.sms-container[_ngcontent-%COMP%]{--background: #f6f6fb;display:flex;justify-content:center;align-items:center;height:100%}.sms-wrapper[_ngcontent-%COMP%]{background:#fff;border-bottom-left-radius:20px;border-bottom-right-radius:20px;padding:24px;width:100%;box-shadow:0 8px 24px #0000001a;display:flex;flex-direction:column;align-items:stretch;justify-content:center;margin:auto;height:100%}.logo-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:6px}.logo-img[_ngcontent-%COMP%]{width:120px;height:auto}.title-container[_ngcontent-%COMP%]{text-align:center;margin-bottom:50px;font-size:.5rem}ion-item[_ngcontent-%COMP%]{width:100%;margin-bottom:20px;--background: #f5f5f5;border-radius:8px;align-items:center}input[_ngcontent-%COMP%]{background:#f1f1f1;padding:10px;border-radius:10px;border:none;font-size:14px}ion-button.send-btn[_ngcontent-%COMP%]{--background: #0D3873;--color: white;border-radius:8px}.input-label[_ngcontent-%COMP%]{font-weight:500;font-size:14px;margin-bottom:4px;color:#000;display:block;padding-left:4px}.input-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:20px;width:100%}.half-input[_ngcontent-%COMP%]{flex:1;--background: #f1f1f1;--padding-start: 10px;--border-radius: 10px}ion-input[_ngcontent-%COMP%]{--background: #f1f1f1;--padding-start: 10px;--border-radius: 10px}"]});let l=r;return l})();export{L as OtpVerificationPage};
