import{a as E}from"./chunk-IWOS63WX.js";import{a as w,b as k,c as I,g as F,h as j,k as N,l as T}from"./chunk-YVFP7G2U.js";import"./chunk-POA22WFE.js";import"./chunk-QUJFQN2Y.js";import"./chunk-6D27DZ34.js";import"./chunk-3NODV7JW.js";import"./chunk-547OZNO4.js";import"./chunk-JX6BS7SJ.js";import"./chunk-3TIPS6QV.js";import"./chunk-BSAYALUA.js";import"./chunk-7FY2OE2O.js";import"./chunk-J2OL6VUA.js";import"./chunk-GSIDHORN.js";import"./chunk-ET25664Q.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-JWWC77AT.js";import"./chunk-CKP3SGE2.js";import"./chunk-5IOERQT4.js";import{h as x}from"./chunk-RETT3Y54.js";import{Ac as P,Bc as _,Da as g,Va as c,Wa as o,Xa as n,Ya as l,cc as b,gb as f,jc as h,lc as m,nc as v,oc as C,qb as s,rc as M,sa as d,sc as S,tc as y,xa as a,zc as O}from"./chunk-WVCMXTPH.js";import"./chunk-HFL6MWQG.js";import"./chunk-UJWRXINH.js";import"./chunk-4XRDT473.js";import"./chunk-OAZACCPN.js";import"./chunk-CLDSZD2A.js";import"./chunk-M2X7KQLB.js";import"./chunk-HHPFJLTL.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-JHI3MBHO.js";var H=(()=>{let i=class i{constructor(r,e,t,u){this.fb=r,this.authService=e,this.router=t,this.toastController=u}ngOnInit(){this.otpForm=this.fb.group({otp:["",[m.required,m.minLength(4),m.maxLength(6)]]}),this.phoneNumber=localStorage.getItem("phone")||""}onSubmit(){if(this.otpForm.valid){let r=this.otpForm.value.otp,e={phone:this.phoneNumber,otp:r};this.authService.verifyOtp(e).subscribe({next:t=>{console.log("OTP v\xE9rifi\xE9",t),localStorage.setItem("jwtToken",t.token),this.router.navigate(["/registration-success"])},error:t=>{console.error("OTP invalide",t)}})}else console.log("Formulaire invalide")}};i.\u0275fac=function(e){return new(e||i)(a(O),a(E),a(x),a(N))},i.\u0275cmp=g({type:i,selectors:[["app-validationsms"]],decls:17,vars:2,consts:[["slot","start"],["defaultHref","/login","text",""],[1,"sms-container",3,"fullscreen"],[1,"sms-wrapper"],[1,"logo-container"],["src","assets/logo.png",1,"logo-img"],[1,"title-container"],[3,"ngSubmit","formGroup"],[1,"input-container"],[1,"input-label"],["type","tel","placeholder","xxxxxxx","formControlName","otp"],["expand","block","type","submit",1,"send-btn"]],template:function(e,t){e&1&&(o(0,"ion-toolbar")(1,"ion-buttons",0),l(2,"ion-back-button",1),n()(),o(3,"ion-content",2)(4,"div",3)(5,"div",4),l(6,"img",5),n(),o(7,"div",6)(8,"h1"),s(9,"Validation SMS"),n()(),o(10,"form",7),f("ngSubmit",function(){return t.onSubmit()}),o(11,"div",8)(12,"label",9),s(13,"Code"),n(),l(14,"input",10),n(),o(15,"ion-button",11),s(16,"Valider"),n()()()()),e&2&&(d(3),c("fullscreen",!0),d(7),c("formGroup",t.otpForm))},dependencies:[T,w,k,I,F,j,b,P,M,h,v,C,_,S,y],styles:["ion-toolbar[_ngcontent-%COMP%]{--border-width: 0;box-shadow:none;height:100px;--min-height: 56px;max-width:350px;margin:0 auto;width:100%;padding:0 16px;border-top-left-radius:20px;border-top-right-radius:20px}ion-back-button[_ngcontent-%COMP%]{margin-left:-20px;margin-top:50px}.sms-container[_ngcontent-%COMP%]{--background: #f6f6fb;display:flex;justify-content:center;align-items:center;height:100%}.sms-wrapper[_ngcontent-%COMP%]{background:#fff;border-bottom-left-radius:20px;border-bottom-right-radius:20px;padding:24px;width:100%;box-shadow:0 8px 24px #0000001a;display:flex;flex-direction:column;align-items:stretch;justify-content:center;margin:auto;height:100%}.logo-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:6px}.logo-img[_ngcontent-%COMP%]{width:150px;height:auto}.title-container[_ngcontent-%COMP%]{text-align:center;margin-bottom:50px;font-size:.5rem}ion-item[_ngcontent-%COMP%]{width:100%;margin-bottom:20px;--background: #f5f5f5;border-radius:8px;align-items:center}ion-button.send-btn[_ngcontent-%COMP%]{--background: #0D3873;--color: white;border-radius:8px}.input-label[_ngcontent-%COMP%]{font-weight:500;font-size:14px;margin-bottom:4px;color:#000;display:block;padding-left:4px}.input-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:20px;width:100%}.half-input[_ngcontent-%COMP%]{flex:1;--background: #f1f1f1;--padding-start: 10px;--border-radius: 10px}input[_ngcontent-%COMP%]{background:#f1f1f1;padding:10px;border-radius:10px;border:none;font-size:14px;--padding-start: 10px}"]});let p=i;return p})();export{H as ValidationsmsPage};
