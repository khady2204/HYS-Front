import{a as $}from"./chunk-IWOS63WX.js";import{b as q,c as A,d as Y,g as j,h as L,j as G,k as H,l as B}from"./chunk-YVFP7G2U.js";import"./chunk-POA22WFE.js";import"./chunk-QUJFQN2Y.js";import"./chunk-6D27DZ34.js";import"./chunk-3NODV7JW.js";import"./chunk-547OZNO4.js";import"./chunk-JX6BS7SJ.js";import"./chunk-3TIPS6QV.js";import"./chunk-BSAYALUA.js";import"./chunk-7FY2OE2O.js";import"./chunk-J2OL6VUA.js";import"./chunk-GSIDHORN.js";import"./chunk-ET25664Q.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-JWWC77AT.js";import"./chunk-CKP3SGE2.js";import"./chunk-5IOERQT4.js";import{h as w,i as E,m as S}from"./chunk-RETT3Y54.js";import{Ac as R,Bc as V,Da as b,Ha as u,Va as p,Wa as n,Xa as t,Ya as m,Yb as C,cc as _,gb as x,ic as M,jc as y,lc as l,nc as P,oc as O,qb as i,rc as k,sa as d,sc as F,tc as I,uc as T,vc as N,wc as D,xa as g,zc as z}from"./chunk-WVCMXTPH.js";import"./chunk-HFL6MWQG.js";import"./chunk-UJWRXINH.js";import"./chunk-4XRDT473.js";import"./chunk-OAZACCPN.js";import"./chunk-CLDSZD2A.js";import"./chunk-M2X7KQLB.js";import"./chunk-HHPFJLTL.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{e as f}from"./chunk-JHI3MBHO.js";function J(o,s){o&1&&(n(0,"div",31)(1,"small"),i(2,"Veuillez remplir votre nom"),t()())}function W(o,s){o&1&&(n(0,"div",31)(1,"small"),i(2,"Veuillez remplir votre pr\xE9nom"),t()())}function K(o,s){o&1&&(n(0,"div",31)(1,"small"),i(2,"T\xE9l\xE9phone invalide"),t()())}function Q(o,s){o&1&&(n(0,"div",31)(1,"small"),i(2,"Veuillez remplir votre adresse"),t()())}function U(o,s){o&1&&(n(0,"div",31)(1,"small"),i(2,"18 ans minimum requis"),t()())}function X(o,s){o&1&&(n(0,"div",31)(1,"small"),i(2,"Email invalide"),t()())}function ee(o,s){o&1&&(n(0,"div",31)(1,"small"),i(2,"Au moins 8 caract\xE8res avec lettres, chiffres et symbole"),t()())}var ue=(()=>{let s=class s{constructor(a,r,e,c){this.authService=a,this.router=r,this.fb=e,this.toastCtrl=c}ngOnInit(){let a=new Date;a.setFullYear(a.getFullYear()-18),this.maxDate=a.toISOString().split("T")[0],this.registerForm=this.fb.group({nom:["",l.required],prenom:["",l.required],phone:["",[l.required,l.pattern(/^\d{9,15}$/)]],address:["",l.required],datenaissance:["",[l.required,this.ageValidator]],sexe:["",l.required],email:["",[l.required,l.email]],password:["",[l.required,l.minLength(8),l.pattern(/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/)]],confirmPassword:["",l.required],acceptTerms:[!1,l.requiredTrue]},{validators:this.passwordMatchValidator})}get nom(){return this.registerForm.get("nom")}get prenom(){return this.registerForm.get("prenom")}get address(){return this.registerForm.get("address")}get email(){return this.registerForm.get("email")}get password(){return this.registerForm.get("password")}get datenaissance(){return this.registerForm.get("datenaissance")}get phone(){return this.registerForm.get("phone")}passwordMatchValidator(a){let r=a.get("password")?.value,e=a.get("confirmPassword")?.value;return r===e?null:{passwordMismatch:!0}}ageValidator(a){let r=a.value;if(!r)return null;let e=new Date(r),c=new Date,h=c.getFullYear()-e.getFullYear(),v=c.getMonth()-e.getMonth(),Z=c.getDate()-e.getDate();return h<18||h===18&&(v<0||v===0&&Z<0)?{tooYoung:!0}:null}onRegister(){return f(this,null,function*(){if(this.registerForm.invalid)return yield(yield this.toastCtrl.create({message:"Veuillez remplir tous les champs correctement.",duration:2e3,color:"danger"})).present();let a=this.registerForm.value;this.authService.register(a).subscribe({next:()=>f(this,null,function*(){localStorage.setItem("phone",a.phone),yield(yield this.toastCtrl.create({message:"Inscription r\xE9ussie. Code OTP envoy\xE9 au num\xE9ro !",duration:2500,color:"success"})).present(),this.router.navigate(["/validationsms"])}),error:r=>f(this,null,function*(){yield(yield this.toastCtrl.create({message:r.error?.message||"Erreur lors de l\u2019inscription.",duration:2500,color:"danger"})).present(),console.error(r)})})})}};s.\u0275fac=function(r){return new(r||s)(g($),g(w),g(z),g(H))},s.\u0275cmp=b({type:s,selectors:[["app-register"]],decls:76,vars:10,consts:[["slot","start"],["defaultHref","/home"],["fullscreen","",1,"register-container"],[1,"register-wrapper"],[1,"logo-container"],["src","assets/logo.png",1,"logo"],[1,"form-title"],[3,"ngSubmit","formGroup"],[1,"row"],[1,"input-container"],[1,"input-label"],["type","text","formControlName","nom"],["class","error",4,"ngIf"],["type","text","formControlName","prenom"],["type","tel","formControlName","phone"],["type","text","formControlName","address"],["type","date","formControlName","datenaissance",3,"max"],["formControlName","sexe"],["value",""],["value","Homme"],["value","Femme"],["type","email","formControlName","email"],["type","password","formControlName","password"],["type","password","formControlName","confirmPassword"],[1,"bp-container"],[1,"checkbox-item"],["type","checkbox","formControlName","acceptTerms"],["routerLink","/",1,"a"],["type","submit",1,"login-button",3,"disabled"],[1,"bottom-text"],["routerLink","/login",1,"login-link"],[1,"error"]],template:function(r,e){r&1&&(n(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),m(3,"ion-back-button",1),t()()(),n(4,"ion-content",2)(5,"div",3)(6,"div",4),m(7,"img",5),t(),n(8,"h2",6),i(9,"Inscription"),t(),n(10,"form",7),x("ngSubmit",function(){return e.onRegister()}),n(11,"div",8)(12,"div",9)(13,"label",10),i(14,"Nom"),t(),m(15,"input",11),u(16,J,3,0,"div",12),t(),n(17,"div",9)(18,"label",10),i(19,"Pr\xE9nom(s)"),t(),m(20,"input",13),u(21,W,3,0,"div",12),t()(),n(22,"div",8)(23,"div",9)(24,"label",10),i(25,"T\xE9l\xE9phone"),t(),m(26,"input",14),u(27,K,3,0,"div",12),t(),n(28,"div",9)(29,"label",10),i(30,"Adresse"),t(),m(31,"input",15),u(32,Q,3,0,"div",12),t()(),n(33,"div",8)(34,"div",9)(35,"label",10),i(36,"Date de Naissance"),t(),m(37,"input",16),u(38,U,3,0,"div",12),t(),n(39,"div",9)(40,"label",10),i(41,"Genre"),t(),n(42,"select",17)(43,"option",18),i(44,"-- Choisir --"),t(),n(45,"option",19),i(46,"Homme"),t(),n(47,"option",20),i(48,"Femme"),t()()()(),n(49,"div",9)(50,"label",10),i(51,"Email"),t(),m(52,"input",21),u(53,X,3,0,"div",12),t(),n(54,"div",9)(55,"label",10),i(56,"Mot de passe"),t(),m(57,"input",22),u(58,ee,3,0,"div",12),t(),n(59,"div",9)(60,"label",10),i(61,"Confirmer Mot de passe"),t(),m(62,"input",23),t(),n(63,"div",24)(64,"label",25),m(65,"input",26),i(66," J\u2019accepte "),t(),n(67,"a",27),i(68,"Lire nos T & C"),t()(),n(69,"button",28),i(70," S\u2019inscrire "),t()(),n(71,"div",29)(72,"p"),i(73,"Vous avez un compte ? "),n(74,"a",30),i(75,"Se connecter"),t()()()()()),r&2&&(d(10),p("formGroup",e.registerForm),d(6),p("ngIf",(e.nom==null?null:e.nom.invalid)&&(e.nom==null?null:e.nom.touched)),d(5),p("ngIf",(e.prenom==null?null:e.prenom.invalid)&&(e.prenom==null?null:e.prenom.touched)),d(6),p("ngIf",(e.phone==null?null:e.phone.invalid)&&(e.phone==null?null:e.phone.touched)),d(5),p("ngIf",(e.address==null?null:e.address.invalid)&&(e.address==null?null:e.address.touched)),d(5),p("max",e.maxDate),d(),p("ngIf",(e.datenaissance==null||e.datenaissance.errors==null?null:e.datenaissance.errors.tooYoung)&&(e.datenaissance==null?null:e.datenaissance.touched)),d(15),p("ngIf",(e.email==null?null:e.email.invalid)&&(e.email==null?null:e.email.touched)),d(5),p("ngIf",(e.password==null?null:e.password.invalid)&&(e.password==null?null:e.password.touched)),d(11),p("disabled",e.registerForm.invalid))},dependencies:[_,C,R,k,N,D,y,M,T,P,O,V,F,I,B,q,A,Y,j,L,G,S,E],styles:["ion-toolbar[_ngcontent-%COMP%]{--border-width: 0;box-shadow:none;height:100px;--min-height: 56px;margin:0 auto;width:100%;padding:0 16px;border-top-left-radius:20px;border-top-right-radius:20px}ion-back-button[_ngcontent-%COMP%]{margin-left:-20px;margin-top:40px;color:#0d3873}.register-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:20px;background:#f9f9f9;height:100%}.register-wrapper[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:24px;width:100%;box-shadow:0 4px 12px #00000014;height:100%}.logo-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:10px}.logo[_ngcontent-%COMP%]{width:80px;height:auto}.form-title[_ngcontent-%COMP%]{text-align:center;font-size:22px;font-weight:600;margin-bottom:20px;color:#036}.row[_ngcontent-%COMP%]{display:flex;gap:12px;margin-bottom:16px}.row[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]{flex:1}.input-label[_ngcontent-%COMP%]{font-weight:500;font-size:14px;margin-bottom:6px;color:#000;display:block;padding-left:4px}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{background:#f1f1f1;padding:10px 12px;border-radius:10px;border:none;width:100%;font-size:14px;outline:none;transition:all .2s ease}input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{background:#eaeaea;border:1px solid #3b82f6}.error[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#e63946;font-size:12px;margin-top:4px;display:block}.bp-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin:16px 0;color:#036}.checkbox-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:14px}.a[_ngcontent-%COMP%]{font-size:13px;color:#036;text-decoration:none}.a[_ngcontent-%COMP%]:hover{text-decoration:underline}.login-button[_ngcontent-%COMP%]{background:#036;color:#fff;border:none;padding:12px;border-radius:10px;font-size:16px;font-weight:600;width:100%;cursor:pointer;transition:background .3s ease}.login-button[_ngcontent-%COMP%]:disabled{background:#9ca3af;cursor:not-allowed}.login-button[_ngcontent-%COMP%]:hover:not(:disabled){background:#036}.bottom-text[_ngcontent-%COMP%]{text-align:center;font-size:14px;margin-top:16px}.login-link[_ngcontent-%COMP%]{color:#036;text-decoration:none;font-weight:500}.login-link[_ngcontent-%COMP%]:hover{text-decoration:underline}"]});let o=s;return o})();export{ue as RegisterPage};
