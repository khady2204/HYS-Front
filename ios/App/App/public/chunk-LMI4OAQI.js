import{a as B}from"./chunk-IWOS63WX.js";import{a as F,b as E,c as N,g as T,h as j,k as D,l as R}from"./chunk-YVFP7G2U.js";import"./chunk-POA22WFE.js";import"./chunk-QUJFQN2Y.js";import"./chunk-6D27DZ34.js";import"./chunk-3NODV7JW.js";import"./chunk-547OZNO4.js";import"./chunk-JX6BS7SJ.js";import"./chunk-3TIPS6QV.js";import"./chunk-BSAYALUA.js";import"./chunk-7FY2OE2O.js";import"./chunk-J2OL6VUA.js";import"./chunk-GSIDHORN.js";import"./chunk-ET25664Q.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-JWWC77AT.js";import"./chunk-CKP3SGE2.js";import"./chunk-5IOERQT4.js";import{f as x,h as w,m as v}from"./chunk-RETT3Y54.js";import{Ac as k,Bc as I,Da as g,Va as u,Wa as i,Xa as o,Ya as d,cc as b,gb as h,jc as C,lc as p,nc as P,oc as M,qb as l,rc as y,sa as c,sc as S,tc as _,xa as a,zc as O}from"./chunk-WVCMXTPH.js";import"./chunk-HFL6MWQG.js";import"./chunk-UJWRXINH.js";import"./chunk-4XRDT473.js";import"./chunk-OAZACCPN.js";import"./chunk-CLDSZD2A.js";import"./chunk-M2X7KQLB.js";import"./chunk-HHPFJLTL.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{e as f}from"./chunk-JHI3MBHO.js";var U=(()=>{let r=class r{constructor(e,t,n,s,q){this.fb=e,this.authService=t,this.toastController=n,this.router=s,this.route=q}ngOnInit(){this.passwordForm=this.fb.group({newPassword:["",[p.required,p.minLength(6)]],confirmPassword:["",p.required]}),this.route.queryParams.subscribe(e=>{this.phone=e.phone})}showToast(e,t="success"){return f(this,null,function*(){(yield this.toastController.create({message:e,duration:3e3,color:t})).present()})}onSubmit(){if(this.passwordForm.invalid){this.showToast("Formulaire invalide","danger");return}let{newPassword:e,confirmPassword:t}=this.passwordForm.value;if(e!==t){this.showToast("Les mots de passe ne correspondent pas","danger");return}if(!this.phone){this.showToast("Num\xE9ro de t\xE9l\xE9phone manquant","danger");return}let n={phone:this.phone,newPassword:e,confirmPassword:t};console.log("Donn\xE9es envoy\xE9es au backend:",n),this.authService.confirmReset(n).subscribe({next:s=>{this.showToast("Mot de passe r\xE9initialis\xE9"),this.router.navigate(["/confirmation"])},error:s=>{console.error("Erreur :",s),this.showToast("Erreur lors de la r\xE9initialisation","danger")}})}};r.\u0275fac=function(t){return new(t||r)(a(O),a(B),a(D),a(w),a(x))},r.\u0275cmp=g({type:r,selectors:[["app-new-password"]],decls:21,vars:2,consts:[["slot","start"],["defaultHref","/f-password","text",""],[1,"new-container",3,"fullscreen"],[1,"new-wrapper"],[1,"logo-container"],["src","assets/logo.png",1,"logo-img"],[1,"title-container"],[3,"ngSubmit","formGroup"],[1,"input-container"],[1,"input-label"],["type","password","placeholder",".......","formControlName","newPassword"],["type","password","placeholder",".......","formControlName","confirmPassword"],["expand","block","type","submit",1,"send-btn"]],template:function(t,n){t&1&&(i(0,"ion-toolbar")(1,"ion-buttons",0),d(2,"ion-back-button",1),o()(),i(3,"ion-content",2)(4,"div",3)(5,"div",4),d(6,"img",5),o(),i(7,"div",6)(8,"h1"),l(9,"Reinitialisation"),o()(),i(10,"form",7),h("ngSubmit",function(){return n.onSubmit()}),i(11,"div",8)(12,"label",9),l(13,"Nouveau mot de passe"),o(),d(14,"input",10),o(),i(15,"div",8)(16,"label",9),l(17,"Confirmer le mot de passe"),o(),d(18,"input",11),o(),i(19,"ion-button",12),l(20,"Valider"),o()()()()),t&2&&(c(3),u("fullscreen",!0),c(7),u("formGroup",n.passwordForm))},dependencies:[R,F,E,N,T,j,b,k,y,C,P,M,v,I,S,_],styles:["ion-toolbar[_ngcontent-%COMP%]{--border-width: 0;box-shadow:none;height:56px;--min-height: 56px;margin:0 auto;width:100%;padding:0 16px;border-top-left-radius:20px;border-top-right-radius:20px}ion-back-button[_ngcontent-%COMP%]{margin-left:-20px}.new-container[_ngcontent-%COMP%]{--background: #f6f6fb;display:flex;justify-content:center;align-items:center;height:100%}.new-wrapper[_ngcontent-%COMP%]{background:#fff;border-bottom-left-radius:20px;border-bottom-right-radius:20px;padding:24px;width:100%;box-shadow:0 8px 24px #0000001a;display:flex;flex-direction:column;align-items:stretch;justify-content:center;margin:auto;height:100%}.logo-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:6px}.logo-img[_ngcontent-%COMP%]{width:120px;height:auto}.title-container[_ngcontent-%COMP%]{text-align:center;margin-bottom:50px;font-size:.5rem}ion-item[_ngcontent-%COMP%]{width:100%;margin-bottom:20px;--background: #f5f5f5;border-radius:8px;align-items:center}input[_ngcontent-%COMP%]{background:#f1f1f1;padding:10px;border-radius:10px;border:none;font-size:14px}ion-button.send-btn[_ngcontent-%COMP%]{--background: #0D3873;--color: white;border-radius:8px}.input-label[_ngcontent-%COMP%]{font-weight:500;font-size:14px;margin-bottom:4px;color:#000;display:block;padding-left:4px}.input-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:20px;width:100%}.half-input[_ngcontent-%COMP%]{flex:1;--background: #f1f1f1;--padding-start: 10px;--border-radius: 10px}ion-input[_ngcontent-%COMP%]{--background: #f1f1f1;--padding-start: 10px;--border-radius: 10px}"]});let m=r;return m})();export{U as NewPasswordPage};
