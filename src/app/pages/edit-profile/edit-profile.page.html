<!-- Header -->
<ion-header>
  <ion-toolbar class="toolbar-solid">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="" text="" (click)="goBack()"></ion-back-button>
    </ion-buttons>
    <ion-title class="text-center fw-bold">Edit Profile</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content fullscreen>

  <!-- Photo de profil -->
  <div class="d-flex justify-content-center align-items-center mt-4 mb-3 position-relative">
    <div class="profile-wrapper">
      <ion-img
        [src]="profileImageUrl || 'assets/profileParDefaut.jpg'"
        class="profile-picture"
      ></ion-img>
    </div>

    <input
      type="file"
      id="profileImageInput"
      accept="image/*"
      hidden
      (change)="onFileSelected($event)"
    />

    <label
      for="profileImageInput"
      class="btn btn-pink p-1 rounded-circle position-absolute"
      style="bottom: 0; right: calc(50% - 60px); transform: translateX(50%); cursor: pointer;"
    >
      <i class="bi bi-camera fs-5 p-2"></i>
    </label>
  </div>

  <!-- Formulaire -->
  <form [formGroup]="editProfileForm" (ngSubmit)="onSubmit()" class="px-3">

    <div class="mb-3">
      <ion-label>Nom</ion-label>
      <ion-input type="text" formControlName="nom" placeholder="Sow" class="input-bordered"></ion-input>
    </div>

    <div class="mb-3">
      <ion-label>Prénom</ion-label>
      <ion-input type="text" formControlName="prenom" placeholder="Ahmadou Bamba" class="input-bordered"></ion-input>
    </div>

    <div class="mb-3">
      <ion-label>Email</ion-label>
      <ion-input type="email" formControlName="email" placeholder="ahmadou@example.com" class="input-bordered"></ion-input>
    </div>

    <div class="mb-3">
      <ion-label>Téléphone</ion-label>
      <ion-input type="text" formControlName="phone" placeholder="+221 77 000 00 00" class="input-bordered"></ion-input>
    </div>

    <div class="mb-3">
      <ion-label>Adresse</ion-label>
      <ion-input type="text" formControlName="adresse" placeholder="123, Rue du Développement" class="input-bordered"></ion-input>
    </div>

    <div class="mb-3">
      <ion-label>Bio</ion-label>
      <ion-textarea formControlName="bio" placeholder="Parlez-nous de vous..." rows="3" class="input-bordered"></ion-textarea>
    </div>

    <div class="mb-3">
      <ion-label>Date de naissance</ion-label>
      <input type="date" formControlName="dob" class="input-bordered w-100" placeholder="JJ/MM/AAAA" />
    </div>

    <!-- Intérêts -->
    <div class="row mb-3">
      <div class="col-6" *ngFor="let interet of interets">
        <ion-checkbox
          slot="start"
          [value]="interet.id"
          (ionChange)="onCheckboxChange($event)"
          [checked]="editProfileForm.get('interets')?.value.includes(interet.id)"
        ></ion-checkbox>
        <ion-label>{{ interet.nom }}</ion-label>
      </div>
    </div>

    <div class="mb-3 text-center">
      <ion-button expand="block" class="btnSave" type="submit">Enregistrer</ion-button>
    </div>

  </form>

  <!-- Menu flottant -->
  <app-floating-menu></app-floating-menu>

</ion-content>
