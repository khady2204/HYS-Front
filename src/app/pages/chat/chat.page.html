<ion-content class="bg-white">

  <!-- En-tÃªte -->
  <div class="chat-header d-flex align-items-center gap-3 px-3 pt-4 pb-3 border-bottom">
    <i class="bi bi-arrow-left fs-4" (click)="goBack()"></i>
    <img [src]="user?.profileImage || 'assets/img/myLOve/suggestion/user4.png'" class="rounded-circle" width="40" height="40" />
    <div class="ms-1">
      <h6 class="mb-0 fw-bold">{{ user?.prenom }} {{ user?.nom }}</h6>
      <small class="text-muted">En ligne</small>
    </div>
  </div>

  <!-- Date -->
  <div class="text-center my-3">
    <span class="px-3 py-1 rounded-pill small text-muted">Aujourd'hui</span>
  </div>

  <!-- Zone des messages -->
<div class="px-3 pb-5">
  <div *ngFor="let message of messages">
    <div
      class="d-flex mb-2"
      [ngClass]="{
        'justify-content-end': message.senderId === currentUserId,
        'justify-content-start': message.senderId !== currentUserId
      }"
    >
      <div
        class="msg-bubble p-2 rounded"
        [ngStyle]="{
          'background-color': message.senderId === currentUserId ? '#000000' : '#D8D8D8',
          'color': message.senderId === currentUserId ? '#FFFFFF' : '#000000'
        }"
        style="max-width: 60%;"
      >
        <div>{{ message.content }}</div>
        <div class="msg-time text-muted small mt-1 text-end">{{ message.timestamp | date:'shortTime' }}</div>
    </div>
  </div>

  </div>
</div>


  <!-- Zone de saisie -->
  <div class="chat-input d-flex align-items-center p-3 border-top gap-3 bg-white position-sticky bottom-0" style="z-index:10;">
    <label class="mb-0">
      <i class="bi bi-paperclip fs-5" style="cursor:pointer;"></i>
      <input type="file" accept="image/*,video/*" style="display:none;" />
    </label>
    <input type="text"
           class="form-control rounded-pill"
           [(ngModel)]="newMessage"
           (keydown.enter)="sendMessage()"
           placeholder="Message"
           style="background:#f5f5f5; border:none;" />
    <button type="button" class="btn p-0" (click)="sendMessage()">
      <i class="bi bi-mic fs-5"></i>
    </button>
    <i class="bi bi-gear fs-5" style="cursor:pointer;"></i>
  </div>

</ion-content>
